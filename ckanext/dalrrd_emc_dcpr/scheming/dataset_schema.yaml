# custom dataset schema, as used by the ckanext-scheming extension:
#
# https://github.com/ckan/ckanext-scheming

scheming_version: 2
dataset_type: dataset
about: CKAN schema for the SASDI EMC. This schema holds SANS1878-related fields

dataset_fields:

  - field_name: title
    label: Title
    help_text: Name by which the cited resource is known, the automatically filled URL is a unique identifier for the metadata record- This is a SANS 1878 mandatory field
    preset: title
    required: true
    form_placeholder: eg. A descriptive title

  - field_name: featured
    label: Feature metadata record on EMC landing page?
    required: false
    help_text: Should this metadata record be featured on the EMC front page?
    validators: boolean_validator
    preset: emc_checkbox

  - field_name: doi
    label: DOI
    required: false
    help_text: Digital Object Identifier of the metadata record (if any)
    validators: doi_validator

  - field_name: metadata_standard
    label: Metadata Standard
    preset: modified_repeating_subfields
    repeating_subfields:

    - field_name: name
      label: Metadata standard name
      required: false
      help_text: >-
        Name(s) of metadata standard used, if multiple standards used, separate them by comma, leave
        blank if the metadata standard used is SANS1878

    - field_name: version
      label: Metadata standard version
      required: false
      help_text: >-
        Version(s) of metadata standard used, if multiple standards used, separate versions by comma, leave
        blank if the metadata standard version is 1.1

  - field_name: notes
    label: Abstract
    required: true
    form_snippet: markdown.html
    form_placeholder: eg. Some useful notes about the data
    help_text: Brief narrative summary of the content of the resource - This is a SANS 1878 mandatory field

  - field_name: owner_org
    label: Responsible organisation Name
    required: true
    preset: emc_dataset_organization
    help_text: Organisation responsible for the metadata record. This is a SANS 1878 mandatory field

  - field_name: responsible_party
    label: Metadata record responsible party
    preset: modified_repeating_subfields
    repeating_subfields:
    - field_name: individual_name
      label: Individual name
      required: true
      help_text: Name of personnel responsible of this metadata record

    - field_name: role
      label: Role
      required: true
      help_text: function performed by the organisation responsible of this metadata record
      preset: select
      choices:
        - value: resource_provider
          label: resource provider
        - value: custodian
          label: Custodian
        - value: owner
          label: owner
        - value: user
          label: User
        - value: distributor
          label: distributor
        - value: originator
          label: Originator
        - value: point_of_contact
          label: point of contact
        - value: principal_investigator
          label: principal investigator
        - value: processor
          label: processor
        - value: publisher
          label: publisher

  - field_name: topic_and_sasdi_theme
    label: Topic category and SASDI theme
    preset: modified_repeating_subfields
    repeating_subfields:

    - field_name: iso_topic_category
      label: Topic Category
      help_text: ISO 19115 Topic Category for the metadata record - This is a SANS 1878 mandatory field
      required: true
      choices_helper: emc_iso_topic_categories
      validators: >-
        ignore_missing
        convert_to_tags(iso_topic_categories)
      output_validators: >-
        convert_from_tags(iso_topic_categories)
        ignore_missing
      form_snippet: "vocab_select.html"
      display_snippet: "vocab_tag_display.html"
      # display_snippet: null

    - field_name: sasdi_theme
      label: SASDI Theme
      help_text: South African Spatial Data Infrastructure Theme
      choices_helper: emc_sasdi_themes
      validators: >-
        ignore_missing
        convert_to_tags(sasdi_themes)
      output_validators: >-
        scheming_required
        scheming_choices
        convert_from_tags(sasdi_themes)
        ignore_missing
      form_snippet: vocab_select.html
      display_snippet: vocab_tag_display.html

  - field_name: tag_string
    label: Tags
    preset: emc_free_tags_tag_string_autocomplete
    form_snippet: tag_select.html
    help_text: >-
      Additional keywords useful for describing the metadata record. In order to optimize searchability, it is
      recommended to add at least three keywords
    form_placeholder: eg. economy, mental health, government

  - field_name: metadata_language_and_character_set
    label: Metadata and Metadata record language and character set
    preset: modified_repeating_subfields
    repeating_subfields:


    - field_name: dataset_language
      label: Dataset language
      required: false
      choices:
        - value: en
          label: English
      form_snippet: null_form.html
      help_text: Language of the metadata record - This is a SANS 1878 mandatory field


    - field_name: dataset_character_set
      label: Dataset character set
      required: true
      choices:
        - value: ucs-2
          label: UCS-2
        - value: ucs-4
          label: UCS-4
        - value: utf-7
          label: UTF-7
        - value: utf-8
          label: UTF-8
        - value: utf-16
          label: UTF-16
        - value: 8859part1
          label: 8859-1
        - value: 8859part2
          label: 8859-2
        - value: 8859part3
          label: 8859-3
        - value: 8859part4
          label: 8859-4
        - value: 8859part5
          label: 8859-5
        - value: 8859part6
          label: 8859-6
        - value: 8859part7
          label: 8859-7
        - value: 8859part8
          label: 8859-8
        - value: 8859part9
          label: 8859-9
        - value: 8859part10
          label: 8859-10
        - value: 8859part11
          label: 8859-11
        - value: 8859part13
          label: 8859-13
        - value: 8859part14
          label: 8859-14
        - value: 8859part15
          label: 8859-15
        - value: 8859part16
          label: 8859-16
        - value: jis
          label: jis
        - value: shiftJIS
          label: shiftJIS
        - value: eucJP
          label: eucJP
        - value: usAscii
          label: ASCII
        - value: ebcdic
          label: ebcdic
        - value: eucKR
          label: eucKR
        - value: big5
          label: big5
        - value: GB2312
          label: GB2312
      preset: select
      help_text: >-
        Full name of the character coding standard used for the metadata record -
        This is a SANS 1878 mandatory field

    - field_name: metadata_language
      label: Metadata language
      required: false
      choices:
        - value: en
          label: English
      form_snippet: null_form.html
      help_text: Language for the metadata - This is a SANS 1878 mandatory field

    - field_name: metadata_character_set
      label: Metadata character set
      required: true
      choices:
        - value: ucs-2
          label: UCS-2
        - value: ucs-4
          label: UCS-4
        - value: utf-7
          label: UTF-7
        - value: utf-8
          label: UTF-8
        - value: utf-16
          label: UTF-16
        - value: 8859part1
          label: 8859-1
        - value: 8859part2
          label: 8859-2
        - value: 8859part3
          label: 8859-3
        - value: 8859part4
          label: 8859-4
        - value: 8859part5
          label: 8859-5
        - value: 8859part6
          label: 8859-6
        - value: 8859part7
          label: 8859-7
        - value: 8859part8
          label: 8859-8
        - value: 8859part9
          label: 8859-9
        - value: 8859part10
          label: 8859-10
        - value: 8859part11
          label: 8859-11
        - value: 8859part13
          label: 8859-13
        - value: 8859part14
          label: 8859-14
        - value: 8859part15
          label: 8859-15
        - value: 8859part16
          label: 8859-16
        - value: jis
          label: jis
        - value: shiftJIS
          label: shiftJIS
        - value: eucJP
          label: eucJP
        - value: usAscii
          label: ASCII
        - value: ebcdic
          label: ebcdic
        - value: eucKR
          label: eucKR
        - value: big5
          label: big5
        - value: GB2312
          label: GB2312
      preset: select
      help_text: >-
        Full name of the character coding standard used for the metadata record -
        This is a SANS 1878 mandatory field


  - field_name: lineage
    label: Lineage statement
    required: true
    help_text: general explanation of the data producer's knowledge about the lineage of a metadata record - This is a SANS 1878 mandatory field

  - field_name: contact
    label: Metadata record point of contact
    preset: modified_repeating_subfields
    repeating_subfields:
    - field_name: organisation_name
      label: Contact organisation Name
      required: true
      form_snippet: organization_without_visibility.html
      help_text: Contact organisation for the metadata record. This is a SANS 1878 mandatory field

    - field_name: individual_name
      label: Individual contact name
      required: true
      help_text: name - with surname of the person responsible of this metadata record

    - field_name: role
      label: Organisation role
      required: false
      form_snippet: null_form.html

  - field_name: distribution_format
    label: Distribution format
    preset: modified_repeating_subfields
    repeating_label: Distribution contact
    repeating_subfields:

      - field_name: name
        label: Metadata record distribution format name
        required: true
        placeholder: Electronic metadata record
        help_text: Name of the data transfer format, default is Electronic metadata record - This is a SANS 1878 mandatory field

      - field_name: version
        label: Metadata record distribution format version
        required: true
        form_placeholder: '1.0'
        help_text: Version of the data transfer format (date, number, etc) - This is a SANS 1878 mandatory field

  - field_name: spatial
    label: Geographic location bounding box
    required: true
    help_text: >-
      Bounding box for the metadata record, expressed as the geographic coordinates of the upper left and lower right
      corners - This is a SANS 1878 mandatory field
    preset: emc_dataset_spatial_extent
    display_snippet: null

  - field_name: spatial_parameters
    label: Spatial parameters
    preset: modified_repeating_subfields
    repeating_subfields:

    - field_name: equivalent_scale
      label: Spatial resolution equivalent scale
      required: true
      # preset: spatial_resolution_checker
      help_text: >-
        Level of detail expressed as the scale of a comparable hardcopy map or
        chart. Provide it as the denominator of a representative fraction,
        i.e. the number below the line in a vulgar fraction - This is a
        SANS 1878 mandatory field

    - field_name: spatial_representation_type
      label: Spatial representation type
      required: true
      help_text: >-
          Method used to spatially represent geographic information - This is
          a SANS 1878 mandatory field
      choices:
        - value: "001"
          label: Vector (vector data is used to represent geographic data)
        - value: "002"
          label: Grid (grid data is used to represent geographic data)
        - value: "003"
          label: Text table (textual or tabular data is used to represent geographic data)
        - value: "004"
          label: Triangulated Irregular Network (TIN)
        - value: "005"
          label: >-
            Stereo Model (Three-dimensional view formed by the intersecting homologous rays of  an
            overlapping pair of images)
        - value: "006"
          label: Video (Scene from a video recording)
        - value: "007"
          label: Image (Image formats, e.g. Tiff/BMP/JPEG/SID, etc. - Not a grid)
      preset: select

    - field_name: spatial_reference_system
      label: Spatial Reference System Identifier
      required: false
      validators: emc_srs_validator
      help_text: >-
        "Name of spatial reference system. Provide it as a colon-separated sequence of <ref>:<code> with the
        respective code for the metadata record's spatial coordinate
        reference system. It is recommended to use the EPSG spatial catalogue codes whenever possible
        (e.g. EPSG:32635). Alternatively it is recommended to use a reference as shown on the
        www.spatialreference.org website, which features EPSG, ESRI and user-defined references to well-known
        coordinate reference systems  - This is a SANS 1878 mandatory field"

  - field_name: reference_system_additional_info
    label: Additional information about Reference Systems (temporal, vertical)
    form_snippet: markdown.html
    required: false

  - field_name: metadata_reference_date_and_stamp
    label: Reference date
    preset: modified_repeating_subfields
    repeating_subfields:

    - field_name: reference
      label: Reference datetime
      required: true
      form_snippet: modified_datetime.html
      help_text: Reference datetime for this metadata record

    - field_name: reference_date_type
      label: Reference date type
      required: true
      validators: convert_choices_select_to_int
      preset: select
      choices:
        - value: 001
          label: Creation
        - value: 002
          label: Publication
        - value: 003
          label: Revision
      help_text: Reference date type - This is a SANS 1878 mandatory field

    - field_name: stamp
      label: Stamp date
      required: true
      validators: >-
        ignore_missing
      form_snippet: modified_datetime.html
      help_text: Reference datetime for this metadata record

    - field_name: stamp_date_type
      label: Stamp date type
      required: true
      validators: convert_choices_select_to_int
      preset: select
      choices:
        - value: 001
          label: Creation
      help_text: date metadata was created- This is a SANS 1878 mandatory field

  - field_name: metadata_thumbnail
    label: Metadata record thumbnail
    required: false
    form_placeholder: https://files.isric.org/public/thumbnails/afsis250m/clyppt.png
    help_text: >-
      URL for a thumbnail previewing this metadata record which appears in the search page. Use images with 1:1 ratio for better results

resource_fields:

  - field_name: url
    label: URL
    preset: resource_url_upload

  - field_name: name
    label: Name
    form_placeholder: eg. January 2011 Gold Prices

  - field_name: description
    label: Description
    form_snippet: markdown.html

  - field_name: format
    label: Format
    required: false
    preset: resource_format_autocomplete
    help_text: Name of the data transfer format - This is a SANS 1878 mandatory field

  - field_name: format_version
    label: Format Version
    required: false
    help_text: link format
